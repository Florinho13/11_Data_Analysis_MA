#store the ndvi rasters as tif
ndvi_folder <- "../07_QGIS/NDVI/03_calculated_ndvi_rasters"
for (name in names(ndvi_list)){
#retrieve raster from the list
ndvi_raster <- ndvi_list[[name]]
#Define output file path
output_file <- file.path(paste0(ndvi_folder,"/",name,".tif"))
#save the raster as a GeoTiff
writeRaster(ndvi_raster,output_file, overwrite = TRUE)
}
#2. import datasets -------------------------
# import all field polygons
gpkg_files <- list.files(path = "./01_input/01_NDVI/03_Field_Polygons", pattern = "*.gpkg", full.names = TRUE)
for(file in gpkg_files){
field <- st_read(file)
filename <- tools::file_path_sans_ext(basename(file))
assign(filename,field)
}
plot(Field_Code_2_2_1)
#import all sentinel 2 data needed
parent_folder_jp2 <- "../07_QGIS/NDVI/02_Sentinel_Band_4_and_8/01_Months"
#list all jp2 files within parent folder
jp2_files <- list.files(parent_folder_jp2,pattern = "\\.jp2$",recursive = TRUE,
full.names = TRUE)
for(file in jp2_files){
rasters <- rast(file)
filename <- tools::file_path_sans_ext(basename(file))
assign(filename,rasters)
}
#3. calculate all the required NDVI values###########
#get a list of the raster object names of each the band 4 and band 8 objects
band4_files <- ls(pattern = "B04")
band8_files <- ls(pattern = "B08")
#combine the two lists in a dataframe
S2_dataframe <- data.frame(band4_files,band8_files)
S2_dataframe <- S2_dataframe %>%
mutate(NDVI_name = paste("ndvi_",substr(band4_files,1,22),sep = "")) #add a name for the NDVI rasters.
ndvi_list <- list() #create an empty list to store the NDVI rasters within.
#calculate NDVI for every date and tile used
for (i in 1:nrow(S2_dataframe)){
band4_name <- S2_dataframe$band4_files[i]
band8_name <- S2_dataframe$band8_files[i]
ndvi_list[[i]] <- calculate_ndvi(band4_name,band8_name)
}
#rename NDVI rasters
names(ndvi_list) <- S2_dataframe$NDVI_name
#store the ndvi rasters as tif
ndvi_folder <- "../07_QGIS/NDVI/03_calculated_ndvi_rasters"
for (name in names(ndvi_list)){
#retrieve raster from the list
ndvi_raster <- ndvi_list[[name]]
#Define output file path
output_file <- file.path(paste0(ndvi_folder,"/",name,".tif"))
#save the raster as a GeoTiff
writeRaster(ndvi_raster,output_file, overwrite = TRUE)
}
#4. Prepare NDVI per field calculations and visualisations
field_polygons <- ls(pattern = "Field_Code")
#transform to EPSG32632
for(name in field_polygons){
polygon_data <- get(name)
polygon_trans_to_32632(polygon_data,name)
}
#create field extents
#list of fields with transformed ellipsoid
transformed_fields <- ls(pattern = "^field_[0-9]_[0-9]_[0-9]$")
list_of_extents <- list() #prepare list containing field extents
for (name in transformed_fields){
#create name for field extents
extent_name <- paste(name,"extent",sep = "_")
#get the field corresponding sf
field <- get(name)
#create the extent shapefile.
extent_field <- ext(field)
#assign extent name to the field.
assign(extent_name, extent_field)
list_of_extents[[name]] <- extent_name
}
print(list_of_extents)
# Plot all extents
plot(all_extents, col = NA, border = "red", main = "Field Extents")
ndvi_cropped <- crop(ndvi_list[["ndvi_T32TMT_20240203T103231"]],field_1_1_2_extent)
plot(ndvi_list[["ndvi_T32TMT_20240203T103231"]],col = viridis(50),ext = field_1_1_1_extent)
plot(st_geometry(field_1_1_1),add = TRUE, lwd = 2)
for (name in S2_dataframe$NDVI_name) {
plot(ndvi_list[[name]], main = paste("NDVI for", name))
}
View(ndvi_list)
# 5. Check which fields have an intersect with which NDVI area######
# Map fields to NDVI rasters
ndvi_names <- S2_dataframe$NDVI_name
view(ndvi_names)
# 5. Check which fields have an intersect with which NDVI area######
# Map fields to NDVI rasters
ndvi_names <- names(ndvi_list)
view(ndvi_names)
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[[field_1_1_1]] <- c(ndvi_T32TMT_20240203T103231,
ndvi_T32TMT_20240405T101559,
ndvi_T32TMT_20240510T102021)
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[[field_1_1_1]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[[field_1_1_1]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[["field_1_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_1_1_2"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_2_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_2_1_2"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_3_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_3_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_6_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_1_2"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
View(field_to_ndvi)
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[["field_1_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_1_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_2_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_2_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_3_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_3_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_6_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T10255
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
View(rasters)
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
ndvi_names <- names(ndvi_list)
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[["field_1_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_1_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_2_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_2_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_3_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_3_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_6_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[["field_1_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_1_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_2_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_2_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_3_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_3_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_5_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240510T102021")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
#4. Prepare NDVI per field calculations and visualisations
field_polygons <- ls(pattern = "Field_Code")
#transform to EPSG32632
for(name in field_polygons){
polygon_data <- get(name)
polygon_trans_to_32632(polygon_data,name)
}
#create field extents
#list of fields with transformed ellipsoid
transformed_fields <- ls(pattern = "^field_[0-9]_[0-9]_[0-9]$")
list_of_extents <- list() #prepare list containing field extents
for (name in transformed_fields){
#create name for field extents
extent_name <- paste(name,"extent",sep = "_")
#get the field corresponding sf
field <- get(name)
#create the extent shapefile.
extent_field <- ext(field)
#assign extent name to the field.
assign(extent_name, extent_field)
list_of_extents[[name]] <- extent_name
}
print(list_of_extents)
# Plot all extents
plot(all_extents, col = NA, border = "red", main = "Field Extents")
for (name in S2_dataframe$NDVI_name) {
plot(ndvi_list[[name]], main = paste("NDVI for", name))
}
plot(field_4_1_1)
plot(field_4_1_2)
field_to_ndvi[["field_4_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
field_to_ndvi[["field_4_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
field_to_ndvi <- list()  # Initialize an empty list
field_to_ndvi[["field_1_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_1_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240405T101559",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_2_1_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_2_2_1"]] <- c("ndvi_T32TMT_20240203T103231",
"ndvi_T32TMT_20240518T102559",
"ndvi_T32TMT_20240510T102021",
"ndvi_T32TMT_20240405T101559")
field_to_ndvi[["field_3_1_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_3_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_1_2"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_4_2_1"]] <- c("ndvi_T32TMT_20240213T103141",
"ndvi_T32TMT_20240413T103031",
"ndvi_T32TMT_20240518T102559")
field_to_ndvi[["field_5_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TMT_20240510T102021")
field_to_ndvi[["field_5_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_1_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
field_to_ndvi[["field_6_2_1"]] <- c("ndvi_T32TLT_20240213T103141",
"ndvi_T32TLT_20240413T103031",
"ndvi_T32TLT_20240528T102559")
#6.plot extents per field####
for (field_name in names(field_to_ndvi)) {
# Retrieve the field
field <- get(field_name)
# Retrieve the NDVI rasters assigned to this field
ndvi_rasters <- field_to_ndvi[[field_name]]
# Plot each NDVI raster for this field
for (ndvi_name in ndvi_rasters) {
ndvi_raster <- ndvi_list[[ndvi_name]]
# Crop the NDVI raster to the field extent
ndvi_cropped <- crop(ndvi_raster, ext(field))
# Plot the cropped NDVI raster with the field boundary
plot(ndvi_cropped, main = paste("NDVI for", field_name, "from", ndvi_name),
col = terrain.colors(50))
plot(st_geometry(field), add = TRUE, border = "red", lwd = 2)
}
}
